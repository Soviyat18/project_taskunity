{% extends 'base.html' %}
{% load static %}
{% block title %}   Kanban Issue | Task Unity {% endblock %}

{% block content %}

<div class="flex justify-between items-center mb-6">
    <h4 class="text-slate-900 dark:text-slate-200 text-lg font-medium">Kanban Issue</h4>

    <div class="md:flex hidden items-center gap-2.5 text-sm font-semibold">
        <div class="flex items-center gap-2">
            <a href="/" class="text-sm font-medium text-slate-700 dark:text-slate-400">Task Unity</a>
        </div>
        <div class="flex items-center gap-2">
            <i class="mgc_right_line text-lg flex-shrink-0 text-slate-400 rtl:rotate-180"></i>
            <a href="kanban" class="text-sm font-medium text-slate-700 dark:text-slate-400"
                aria-current="page">Kanban</a>
        </div>
    </div>
</div>

<form action="" method="POST" enctype="multipart/form">
    {% csrf_token %}
<div class="grid lg:grid-cols-4 gap-6">
    <div class="col-span-1 flex flex-col gap-6">
        <div class="card p-6">
            <div class="flex justify-between items-center mb-4">
                <h4 class="card-title">Add Attachment </h4>
                <div class="inline-flex items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-700 w-9 h-9">
                    <i class="mgc_add_line"></i>
                </div>
            </div>
            <div  class="dropzone" id="my-dropzone">
                <div class="fallback">
                    <input name="attachment" type="file" multiple="multiple">
                </div>
                <div class="dz-message needsclick w-full">
                    <div class="mb-3">
                        <i class="mgc_upload_3_line text-4xl text-gray-300 dark:text-gray-200"></i>
                    </div>

                    <h5 class="text-xl text-gray-600 dark:text-gray-200">Drop files here or click to upload...</h5>
                </div>
            </div>
            
            <div class="">

            </div>
        </div>

        <div class="card p-6">
            <div class="flex justify-between items-center mb-4">
                <p class="card-title">Details</p>
                <div class="inline-flex items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-700 w-9 h-9">
                    <i class="mgc_compass_line"></i>
                </div>
            </div>
            <div class="mb-2">
                <select class="selectize"
                        name="status">
                    <option value="new"
                            {% if issue.status == "new" %}selected{% endif %}>
                        New
                    </option>
                    <option value="unassigned"
                            {% if issue.status == "unassigned" %}selected{% endif %}>
                        Unassigned
                    </option>
                    <option value="todo"
                            {% if issue.status == "todo" %}selected{% endif %}>
                        To Do
                    </option>
                    <option value="inprogress"
                            {% if issue.status == "inprogress" %}selected{% endif %}>
                        In Progress
                    </option>
                    <option value="done"
                            {% if issue.status == "done" %}selected{% endif %}>
                        Done
                    </option>
                    <option value="done"
                            {% if issue.status == "review" %}selected{% endif %}>
                        Review
                    </option>
                </select>
                <div class="flex flex-col gap-3 mt-2">
                    <div class="">
                        <label for="select-label-catagory" class="mb-2 block">Labels</label>
                        <input type="text" name="labels" id="label" class="form-input"
                        placeholder="Eg: HTML, CSS , JS" value="{{issue.labels}}"></input>
                    </div>
                </div>
                <div class="flex flex-col gap-3 mt-2">
                    <div class="">
                        <label for="select-label-catagory" class="mb-2 block">Assignee</label>
                        <input type="text" name="user" id="label" class="form-input"
                        value="{{issue.user}}" readonly></input>
                    </div>
                </div>
                
                <div class="flex flex-col gap-3 mt-2">
                    <div class="">
                        <label for="select-label-catagory" class="mb-2 block">Users</label>
                        <select id="search-select" name="assigned_to" class="search-select">
                            {% for employees in employees %}
                            <option value="{{employees.user}}">{{ employees.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
    
                    <div class="flex gap-3">
                        <div class="flex -space-x-2">
                            <img class="inline-block h-8 w-8 rounded-full ring-2 ring-gray-200 dark:ring-gray-700"
                                src="{% static 'assets/images/users/user-9.jpg' %}" alt="Image Description">
                            <img class="inline-block h-8 w-8 rounded-full ring-2 ring-gray-200 dark:ring-gray-700"
                                src="{% static 'assets/images/users/user-8.jpg' %}" alt="Image Description">
                            <img class="inline-block h-8 w-8 rounded-full ring-2 ring-gray-200 dark:ring-gray-700"
                                src="{% static 'assets/images/users/user-7.jpg' %}" alt="Image Description">
                            <img class="inline-block h-8 w-8 rounded-full ring-2 ring-gray-200 dark:ring-gray-700"
                                src="{% static 'assets/images/users/user-6.jpg' %}" alt="Image Description">
                        </div>
                    </div>
                </div>


              <div class="flex flex-col gap-3 mt-2">
                <div>
                <p>Created
                    at {{ issue.date_created }}</p>
                </div>
                <div>
                <p>Updated
                    at {{ issue.updated_at }}</p>
                </div>
              </div>
              
            </div>

           
        </div>
    </div>

    <div class="lg:col-span-3 space-y-6">
        <div class="card p-6">
            <div class="flex justify-between items-center mb-4">
                <p class="card-title">Issue Details of {{issue.title}}</p>
                <div class="inline-flex items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-700 w-9 h-9">
                    <i class="mgc_transfer_line"></i>
                </div>
            </div>

            <div class="flex flex-col gap-3">

                <div class="grid md:grid-cols-2 gap-3">
                    <div>
                        <label for="issue-title" class="mb-2 block">Issue Title</label>
                        <input type="text" id="issue-title" name="title" class="form-input" value="{{ issue.title }}" required>
                    </div>

                        <div>
                            <label for="project-name" class="mb-2 block">Project Name</label>
                            <select id="search-select" class="selectize" name="project" required>
                                <option>Select a project</option>
                                {% for project in projects %}
                <option value="{{ project.name }}" {% if issue.project.name == project.name %}selected{% endif %}>
                    {{ project.name }}
                </option>
            {% endfor %}
                            </select>
                        </div>
                </div>               

                <div class="">
                    <label for="project-description" class="mb-2 block">Click here for further details of <a
                            href="/project_details/{{ project.id }}/" class="text-slate-900 dark:text-slate-200">
                            project </a> <span class="text-red-500">*</span></label>
                </div>
                <div class="">
                    <label for="description" class="mb-2 block">Issue Description</label>
                    <textarea id="description" name="description" class="form-input" >{{ issue.description }}</textarea>
                </div>
                <div class="">
                    <label for="description" class="mb-2 block">Detailed Description</label>
                    <textarea id="description" name="issue_2description"  rows="10" class="form-input" placeholder="Enter detailed description">{{ issue.issue_2description}}</textarea>
                </div>
            </div>
        </div>
        
        <div class="card p-6">
            <div class="flex justify-between items-center mb-4">
                <p class="card-title">Child Issues(If Any)</p>
                <div class="inline-flex items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-700 w-9 h-9">
                    <i class="mgc_transfer_line"></i>
                </div>
            </div>

            <div class="grid grid-cols-4 items-center gap-4">
                <label for="inputEmail3" class="text-gray-800 text-sm font-medium inline-block mb-2">Project Name</label>
                <div class="md:col-span-3">
                    <label>Description </label>
                    <textarea class="form-input" rows="4" id ="project-description"  placeholder
                    ="Write some description here..." > </textarea>
                </div>
            </div>

        </div>

    </div>
    
   

    <div class="lg:col-span-4 mb-2">
        <div class="flex justify-center gap-3">
            <button type="reset"
                class="inline-flex items-center rounded-md border border-transparent bg-red-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500 focus:outline-none">
                Cancel
            </button>
            <button type="submit"
                class="inline-flex items-center rounded-md border border-transparent bg-green-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none">
                Save
            </button>
        </div>
    </div>
</div>
</form>

<div class="card mt-3 p-6">
    <nav class="flex space-x-2 border-b border-gray-200 dark:border-gray-700" aria-label="Tabs" role="tablist">
        <button data-fc-target="#card-type-tab-1" type="button" class="fc-tab-active:bg-white fc-tab-active:border-b-transparent fc-tab-active:text-primary dark:fc-tab-active:bg-gray-800 dark:fc-tab-active:border-b-gray-800 dark:fc-tab-active:text-white -mb-px py-3 px-4 inline-flex items-center gap-2 bg-gray-50 text-sm font-medium text-center border text-gray-500 rounded-t-lg hover:text-gray-700 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400 active" id="card-type-tab-item-1" aria-controls="card-type-tab-1" role="tab">
            Comment
        </button>
    </nav>
    <div class="mt-3">
        <div id="card-type-tab-1" role="tabpanel" aria-labelledby="card-type-tab-item-1">
            <div class="flex items-center gap-4">
                <!-- Profile Image -->
                <div class="relative h-10 w-10 inline-flex">
                    <img src="{% static 'assets/images/users/saraj.jpg' %}" alt="image" class="rounded-full">
                </div>
                <!-- Comment Input Field -->
                <div class="w-full">
                    <input type="text" name="comment" class="form-input w-full" placeholder="Add a comment .....">
                </div>
            </div>
            <div class="flex items-center mt-4 gap-4">
                <!-- Profile Image -->
                <div class="relative h-10 w-10 inline-flex">
                    <img src="{% static 'assets/images/users/saraj.jpg' %}" alt="image" class="rounded-full">
                </div>
                <!-- Comment Input Field -->
                <div class="w-full">
                    <input type="text" name="comment" class="form-input w-full" placeholder="Add a comment .....">
                </div>
            </div>
        </div>
    
        <div class="lg:col-span-4 m-2">
            <div class="flex justify-end gap-3">
                <button type="button"
                    class="inline-flex items-center rounded-md border border-transparent bg-red-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-500 focus:outline-none">
                    Cancel
                </button>
                <button type="button"
                    class="inline-flex items-center rounded-md border border-transparent bg-green-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none">
                    Submit
                </button>
            </div>
        </div>
    </div>
    

</div>


{% endblock %}